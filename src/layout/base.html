<!DOCTYPE html>
<html>
    <head>
        <title>www.mojigram.com</title>

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="description" content="">
        <meta name="google-site-verification" content="FIXME">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=0, minimal-ui">
        <meta name="robots" content="noodp,noydir">

        <!-- Full screen mode!
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
        -->

        <script>
            var scroll_to_top = function() {
                if (window.scrollY) {
                    window.scrollTo(0, 0)
                }
            }

            var document_update_classes = function(remove_classes, add_classes) {
                var old_classes = document.documentElement.className.split(' ')
                  , new_classes = []

                for (var i = 0, ii = old_classes.length; i < ii; ++i) {
                    if (remove_classes.indexOf(old_classes[i]) === -1 && add_classes.indexOf(old_classes[i]) === -1) {
                        new_classes.push(old_classes[i])
                    }
                }

                new_classes = new_classes.concat(add_classes)

                document.documentElement.className = new_classes.join(' ')
            }

            var add_responsive_classes = function() {
                var width = Math.max(
                        document.documentElement["clientWidth"]
                      , document.body && document.body["scrollWidth"]
                      , document.documentElement["scrollWidth"]
                      , document.body && document.body["offsetWidth"]
                      , document.documentElement["offsetWidth"]
                    )
                  , remove_classes = ['small', 'medium', 'large']
                  , add_classes = []

                if (width >= 568) {
                    add_classes.push('small')
                }

                if (width >= 768) {
                    add_classes.push('medium')
                }

                if (width >= 1024) {
                    add_classes.push('large')
                }

                document_update_classes(remove_classes, add_classes)
            }


            window.addEventListener('orientationchange', function() {
                add_responsive_classes()
                // Fix minimal-ui landscape bug.
                scroll_to_top()
            })

            // TODO: debounce this, should not fire too many of these. Push all resize sizes to a queue and every
            // unit of time pick some out of this queue.
            window.addEventListener('resize', function() {
                // Fix minimal-ui landscape bug.
                add_responsive_classes()
                scroll_to_top()
            })

            window.addEventListener('load', function() {
                // Fix minimal-ui landscape bug.
                scroll_to_top()
            })

            // setInterval(function() {
            //     scroll_to_top()
            // }, 100)

            // add_responsive_classes()

            // Standalone is when app is chromeless.
            if (navigator && navigator.standalone) {
                document_update_classes([], ['standalone'])
            }

            add_responsive_classes()

        </script>

        <script>
            <%= head_js %>
        </script>

        <% for (var i = 0, ii = head_css_files.length; i < ii; ++i) { %>
        <link rel="stylesheet" type="text/css" href="<%= head_css_files[i] %>">
        <% } %>
        <!--<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600' rel='stylesheet' type='text/css'>-->
    </head>

    <body>
        <div id="app" class="body-container"></div>

        <% if (process.env.NODE_ENV === 'development') { %>
        <script>document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>')</script>
        <% } %>

        <% for (var i = 0, ii = body_js_files.length; i < ii; ++i) { %>
        <script src="<%= body_js_files[i] %>"></script>
        <% } %>

        <script>
        /*
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
            ga('create', 'FIXME', 'www.mojigram.com');
            ga('send', 'pageview');
            */
        </script>
    </body>
</html>
