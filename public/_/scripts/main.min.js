!function t(e,a,i){function n(o,r){if(!a[o]){if(!e[o]){var c="function"==typeof require&&require;if(!r&&c)return c(o,!0);if(s)return s(o,!0);throw new Error("Cannot find module '"+o+"'")}var l=a[o]={exports:{}};e[o][0].call(l.exports,function(t){var a=e[o][1][t];return n(a?a:t)},l,l.exports,t,e,a,i)}return a[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)n(i[o]);return n}({1:[function(t,e){var a=t("./pubsub"),i=t("./wrappers/array"),n=t("./wrappers/hash"),s=t("./data_wrapper")([i,n],a),o={}.hasOwnProperty,r=function(t,e){function a(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return a.prototype=e.prototype,t.prototype=new a,t.__super__=e.prototype,t},c=function(t,e){function a(t,e){this.__value=t,this.__path=[],this.__callbacks=e?[e]:[],this.__callbacksQueued=!1,this.__subscribe(),this.__wrap()}return r(a,t),a.prototype.on=function(t,e){"update"===t&&this.__callbacks.push(e)},a.prototype.off=function(t,e){if("update"===t)if(e){for(var a=0,i=this.__callbacks.length;i>a;a++)if(e===this.__callbacks[a]){this.__callbacks.splice(a,1);break}}else this.__callbacks=[]},a.prototype.update=function(t,e,a){return a||this.__shouldUpdate(t,e)?(this.__setValue(t,e),this.__rewrap(e),this.__callbacksQueued||(this.__callbacksQueued=!0,setTimeout(function(){this.__runCallbacks()}.bind(this),0)),!0):!1},a.prototype.__runCallbacks=function(){for(var t=0,e=this.__callbacks.length;e>t;t++)this.__callbacks[t]&&this.__callbacks[t](this);this.__callbacksQueued=!1},a.prototype.__subscribe=function(){this.__eventId=e.subscribeToCortex(function(t,e){this.update(e.value,e.path,e.forceUpdate)}.bind(this),function(t,e){this.__remove(e.path)}.bind(this))},a.prototype.__remove=function(t){if(t.length){var e=t.slice(0,t.length-1),a=this.__subValue(e),i=t[t.length-1],n=a[i];return a.constructor===Object?delete a[i]:a.constructor===Array&&a.splice(i,1),this.update(a,e,!0),n}delete this.__wrappers,delete this.__value},a.prototype.__rewrap=function(t){for(var e=t.slice(0,t.length-1),a=this,i=0,n=e.length;n>i;i++)a=a[e[i]];a.__wrap()},a.prototype.__setValue=function(t,e){if(e.length>1){var a=this.__subValue(e.slice(0,e.length-1));a[e[e.length-1]]=t}else 1===e.length?this.__value[e[0]]=t:this.__value=t},a.prototype.__subValue=function(t){for(var e=this.__value,a=0,i=t.length;i>a;a++)e=e[t[a]];return e},a.prototype.__shouldUpdate=function(t,e){for(var a=this.__value,i=0,n=e.length;n>i;i++)a=a[e[i]];return this.__isDifferent(a,t)},a.prototype.__isDifferent=function(t,e){if(t&&t.constructor===Object){if(!e||e.constructor!==Object||this.__isDifferent(Object.keys(t).sort(),Object.keys(e).sort()))return!0;for(var a in t)if(this.__isDifferent(t[a],e[a]))return!0}else{if(!t||t.constructor!==Array)return t!==e;if(!e||e.constructor!==Array||t.length!==e.length)return!0;for(var i=0,n=t.length;n>i;i++)if(this.__isDifferent(t[i],e[i]))return!0}},a}(s,a);"undefined"!=typeof window&&null!==window&&(window.Cortex=c),e.exports=c},{"./data_wrapper":2,"./pubsub":3,"./wrappers/array":4,"./wrappers/hash":5}],2:[function(t,e){var a=function(t,e){for(var a=0,i=e.length;i>a;a++)for(var n in e[a])t.prototype[n]=e[a][n]};e.exports=function(t,e){function i(t,e,a){this.__eventId=a,this.__value=t,this.__path=e||[],this.__wrap()}return i.prototype.set=function(t,a){e.publish("update"+this.__eventId,{value:t,path:this.__path,forceUpdate:a})},i.prototype.getValue=function(){return this.__value},i.prototype.val=i.prototype.getValue,i.prototype.getPath=function(){return this.__path},i.prototype.getKey=function(){return this.__path[this.__path.length-1]},i.prototype.forEach=function(t){if(this.__isObject())for(var e in this.__wrappers)t(e,this.__wrappers[e],this.__wrappers);else this.__isArray()&&this.__wrappers.forEach(t)},i.prototype.remove=function(){e.publish("remove"+this.__eventId,{path:this.__path})},i.prototype.__wrap=function(){var t;if(this.__cleanup(),this.__isObject()){this.__wrappers={};for(var e in this.__value)t=this.__path.slice(),t.push(e),this.__wrappers[e]=new i(this.__value[e],t,this.__eventId),this[e]=this.__wrappers[e]}else if(this.__isArray()){this.__wrappers=[];for(var a=0,n=this.__value.length;n>a;a++)t=this.__path.slice(),t.push(a),this.__wrappers[a]=new i(this.__value[a],t,this.__eventId),this[a]=this.__wrappers[a]}},i.prototype.__cleanup=function(){if(this.__wrappers){if(this.__isObject())for(var t in this.__wrappers)delete this[t];else if(this.__isArray())for(var e=0,a=this.__wrappers.length;a>e;e++)delete this[e];delete this.__wrappers}},i.prototype.__forceUpdate=function(){this.set(this.__value,!0)},i.prototype.__isObject=function(){return this.__value&&this.__value.constructor===Object},i.prototype.__isArray=function(){return this.__value&&this.__value.constructor===Array},a(i,t),i}},{}],3:[function(t,e){var a=function(){function t(){this.uid=-1,this.topics={}}return t.prototype.subscribe=function(t,e){this.topics.hasOwnProperty(t)||(this.topics[t]=[]),this.topics[t].push({callback:e})},t.prototype.publish=function(t,e){if(!this.topics.hasOwnProperty(t))return!1;var a=this.topics[t],i=function(){for(var i=0,n=a.length;n>i;i++)a[i].callback(t,e)};return i(),!0},t.prototype.subscribeToCortex=function(t,e){return this.uid+=1,this.subscribe("update"+this.uid,t),this.subscribe("remove"+this.uid,e),this.uid},t.prototype.unsubscribeFromCortex=function(t){delete this.topics["update"+t],delete this.topics["remove"+t]},t}();e.exports=new a},{}],4:[function(t,e){var a={count:function(){return this.__value.length},map:function(t){return this.__wrappers.map(t)},find:function(t){for(var e=0,a=this.__wrappers.length;a>e;e++)if(t(this.__wrappers[e],e,this.__wrappers))return this.__wrappers[e];return null},findIndex:function(t){for(var e=0,a=this.__wrappers.length;a>e;e++)if(t(this.__wrappers[e],e,this.__wrappers))return e;return-1},push:function(t){var e=this.__value.push(t);return this.__forceUpdate(),e},pop:function(){var t=this.__value.pop();return this.__forceUpdate(),t},unshift:function(t){var e=this.__value.unshift(t);return this.__forceUpdate(),e},shift:function(){var t=this.__value.shift();return this.__forceUpdate(),t},insertAt:function(t,e){var a=[t,0].concat(e);Array.prototype.splice.apply(this.__value,a),this.__forceUpdate()},removeAt:function(t,e){(isNaN(e)||0>=e)&&(e=1);var a=this.__value.splice(t,e);return this.__forceUpdate(),a}};e.exports=a},{}],5:[function(t,e){var a={keys:function(){return Object.keys(this.__value)},values:function(){var t,e=[];for(t in this.__value)e.push(this.__value[t]);return e},hasKey:function(t){return null!=this.__value[t]},destroy:function(t){var e=this.__value[t];return delete this.__value[t],this.__forceUpdate(),e},"delete":function(t){return console.warn("Method deprecated! Please use .destroy(key) method"),this.remove(t)},add:function(t,e){return this.__value[t]=e,this.__forceUpdate(),e}};e.exports=a},{}],6:[function(t,e){function a(t,e){"use strict";function n(t,e){return function(){return t.apply(e,arguments)}}var s;if(e=e||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=e.touchBoundary||10,this.layer=t,this.tapDelay=e.tapDelay||200,!a.notNeeded(t)){for(var o=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],r=this,c=0,l=o.length;l>c;c++)r[o[c]]=n(r[o[c]],r);i&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,a,i){var n=Node.prototype.removeEventListener;"click"===e?n.call(t,e,a.hijacked||a,i):n.call(t,e,a,i)},t.addEventListener=function(e,a,i){var n=Node.prototype.addEventListener;"click"===e?n.call(t,e,a.hijacked||(a.hijacked=function(t){t.propagationStopped||a(t)}),i):n.call(t,e,a,i)}),"function"==typeof t.onclick&&(s=t.onclick,t.addEventListener("click",function(t){s(t)},!1),t.onclick=null)}}var i=navigator.userAgent.indexOf("Android")>0,n=/iP(ad|hone|od)/.test(navigator.userAgent),s=n&&/OS 4_\d(_\d)?/.test(navigator.userAgent),o=n&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent);a.prototype.needsClick=function(t){"use strict";switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(n&&"file"===t.type||t.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(t.className)},a.prototype.needsFocus=function(t){"use strict";switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!i;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},a.prototype.sendClick=function(t,e){"use strict";var a,i;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),i=e.changedTouches[0],a=document.createEvent("MouseEvents"),a.initMouseEvent(this.determineEventType(t),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),a.forwardedTouchEvent=!0,t.dispatchEvent(a)},a.prototype.determineEventType=function(t){"use strict";return i&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},a.prototype.focus=function(t){"use strict";var e;n&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},a.prototype.updateScrollParent=function(t){"use strict";var e,a;if(e=t.fastClickScrollParent,!e||!e.contains(t)){a=t;do{if(a.scrollHeight>a.offsetHeight){e=a,t.fastClickScrollParent=a;break}a=a.parentElement}while(a)}e&&(e.fastClickLastScrollTop=e.scrollTop)},a.prototype.getTargetElementFromEventTarget=function(t){"use strict";return t.nodeType===Node.TEXT_NODE?t.parentNode:t},a.prototype.onTouchStart=function(t){"use strict";var e,a,i;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),a=t.targetTouches[0],n){if(i=window.getSelection(),i.rangeCount&&!i.isCollapsed)return!0;if(!s){if(a.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=a.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=a.pageX,this.touchStartY=a.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},a.prototype.touchHasMoved=function(t){"use strict";var e=t.changedTouches[0],a=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>a||Math.abs(e.pageY-this.touchStartY)>a?!0:!1},a.prototype.onTouchMove=function(t){"use strict";return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},a.prototype.findControl=function(t){"use strict";return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},a.prototype.onTouchEnd=function(t){"use strict";var e,a,r,c,l,u=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,a=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,o&&(l=t.changedTouches[0],u=document.elementFromPoint(l.pageX-window.pageXOffset,l.pageY-window.pageYOffset)||u,u.fastClickScrollParent=this.targetElement.fastClickScrollParent),r=u.tagName.toLowerCase(),"label"===r){if(e=this.findControl(u)){if(this.focus(u),i)return!1;u=e}}else if(this.needsFocus(u))return t.timeStamp-a>100||n&&window.top!==window&&"input"===r?(this.targetElement=null,!1):(this.focus(u),this.sendClick(u,t),n&&"select"===r||(this.targetElement=null,t.preventDefault()),!1);return n&&!s&&(c=u.fastClickScrollParent,c&&c.fastClickLastScrollTop!==c.scrollTop)?!0:(this.needsClick(u)||(t.preventDefault(),this.sendClick(u,t)),!1)},a.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},a.prototype.onMouse=function(t){"use strict";return this.targetElement?t.forwardedTouchEvent?!0:t.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1):!0:!0},a.prototype.onClick=function(t){"use strict";var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail?!0:(e=this.onMouse(t),e||(this.targetElement=null),e)},a.prototype.destroy=function(){"use strict";var t=this.layer;i&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},a.notNeeded=function(t){"use strict";var e,a;if("undefined"==typeof window.ontouchstart)return!0;if(a=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!i)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(a>31&&window.innerWidth<=window.screen.width)return!0}}return"none"===t.style.msTouchAction?!0:!1},a.attach=function(t,e){"use strict";return new a(t,e)},"undefined"!=typeof define&&define.amd?define(function(){"use strict";return a}):"undefined"!=typeof e&&e.exports?(e.exports=a.attach,e.exports.FastClick=a):window.FastClick=a},{}],7:[function(t,e){!function(){function t(e,a){if("function"==typeof e)return t("*",e);if("function"==typeof a)for(var i=new n(e),s=1;s<arguments.length;++s)t.callbacks.push(i.middleware(arguments[s]));else"string"==typeof e?t.show(e,a):t.start(e)}function a(e){var a=window.location.pathname+window.location.search;a!=e.canonicalPath&&(t.stop(),e.unhandled=!0,window.location=e.canonicalPath)}function i(t,e){"/"==t[0]&&0!=t.indexOf(h)&&(t=h+t);var a=t.indexOf("?");if(this.canonicalPath=t,this.path=t.replace(h,"")||"/",this.title=document.title,this.state=e||{},this.state.path=t,this.querystring=~a?t.slice(a+1):"",this.pathname=~a?t.slice(0,a):t,this.params=[],this.hash="",~this.path.indexOf("#")){var i=this.path.split("#");this.path=i[0],this.hash=i[1]||"",this.querystring=this.querystring.split("#")[0]}}function n(t,e){e=e||{},this.path=t,this.method="GET",this.regexp=s(t,this.keys=[],e.sensitive,e.strict)}function s(t,e,a,i){return t instanceof RegExp?t:(t instanceof Array&&(t="("+t.join("|")+")"),t=t.concat(i?"":"/?").replace(/\/\(/g,"(?:/").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(t,a,i,n,s,o){return e.push({name:n,optional:!!o}),a=a||"",""+(o?"":a)+"(?:"+(o?a:"")+(i||"")+(s||i&&"([^/.]+?)"||"([^/]+?)")+")"+(o||"")}).replace(/([\/.])/g,"\\$1").replace(/\*/g,"(.*)"),new RegExp("^"+t+"$",a?"":"i"))}function o(e){if(e.state){var a=e.state.path;t.replace(a,e.state)}}function r(e){if(1==c(e)&&!(e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)){for(var a=e.target;a&&"A"!=a.nodeName;)a=a.parentNode;if(a&&"A"==a.nodeName){var i=a.getAttribute("href");if((a.pathname!=location.pathname||!a.hash&&"#"!=i)&&!a.target&&l(a.href)){var n=a.pathname+a.search+(a.hash||""),s=n+a.hash;n=n.replace(h,""),h&&s==n||(e.preventDefault(),t.show(s))}}}}function c(t){return t=t||window.event,null==t.which?t.button:t.which}function l(t){var e=location.protocol+"//"+location.hostname;return location.port&&(e+=":"+location.port),0==t.indexOf(e)}var u,d=!0,h="";t.callbacks=[],t.base=function(t){return 0==arguments.length?h:void(h=t)},t.start=function(e){if(e=e||{},!u&&(u=!0,!1===e.dispatch&&(d=!1),!1!==e.popstate&&window.addEventListener("popstate",o,!1),!1!==e.click&&window.addEventListener("click",r,!1),d)){var a=location.pathname+location.search+location.hash;t.replace(a,null,!0,d)}},t.stop=function(){u=!1,removeEventListener("click",r,!1),removeEventListener("popstate",o,!1)},t.show=function(e,a,n){var s=new i(e,a);return!1!==n&&t.dispatch(s),s.unhandled||s.pushState(),s},t.replace=function(e,a,n,s){var o=new i(e,a);return o.init=n,null==s&&(s=!0),s&&t.dispatch(o),o.save(),o},t.dispatch=function(e){function i(){var s=t.callbacks[n++];return s?void s(e,i):a(e)}var n=0;i()},t.Context=i,i.prototype.pushState=function(){history.pushState(this.state,this.title,this.canonicalPath)},i.prototype.save=function(){history.replaceState(this.state,this.title,this.canonicalPath)},t.Route=n,n.prototype.middleware=function(t){var e=this;return function(a,i){return e.match(a.path,a.params)?t(a,i):void i()}},n.prototype.match=function(t,e){var a=this.keys,i=t.indexOf("?"),n=~i?t.slice(0,i):t,s=this.regexp.exec(n);if(!s)return!1;for(var o=1,r=s.length;r>o;++o){var c=a[o-1],l="string"==typeof s[o]?decodeURIComponent(s[o]):s[o];c?e[c.name]=void 0!==e[c.name]?e[c.name]:l:e.push(l)}return!0},"undefined"==typeof e?window.page=t:e.exports=t}()},{}],8:[function(t,e){var a=t("react/addons"),i=(t("jquery"),t("./PagesContainer")),n=t("./Db").get_instance(),s=t("./StaticMixin"),o=t("underscore"),r=a.createClass({displayName:"App",statics:o.extend({},s),getDefaultProps:function(){return{}},render:function(){return this.pages_container=i({db:n}),a.DOM.div({className:"body"},this.pages_container)},go:function(t,e){this.pages_container.go(t,e)}});e.exports=r},{"./Db":9,"./PagesContainer":13,"./StaticMixin":16,jquery:"HlZQrA","react/addons":"g51q1L",underscore:"ZKusGn"}],9:[function(t,e){var a=t("./StaticMixin"),i=t("underscore"),n=function(){this.data={}};n.prototype.set=function(t,e){this.data[t]=e},n.prototype.get=function(t){return this.data[t]},i.extend(n,a),e.exports=n},{"./StaticMixin":16,underscore:"ZKusGn"}],10:[function(t,e){var a=(t("jquery"),{reload:function(t){window.document.location.reload(t)}});e.exports=a},{jquery:"HlZQrA"}],11:[function(t,e){var a=t("react/addons"),i=t("../common/HeaderMixin"),n=a.createClass({displayName:"NestedHeaderComponent",mixins:[i],render:function(){return a.DOM.div({className:"page-header-container"},a.DOM.div({className:"page-header"},a.DOM.a({href:"/","data-leave":"slide-out-to-right","data-enter":"slide-in-from-left"},a.DOM.div({className:"page-header-left"},a.DOM.div({className:"page-header-back"},a.DOM.div({className:"page-header-back-sprite-container"},a.DOM.div({className:"page-header-back-sprite sprite sprite-arrow-left-big-white"})),this.props.back_text))),a.DOM.div({className:"page-header-center",onClick:this.props.scroll_body_to_top},a.DOM.div({className:"page-header-text page-header-title"},this.props.title))))}});e.exports=n},{"../common/HeaderMixin":10,"react/addons":"g51q1L"}],12:[function(t,e){var a=t("jquery"),i={animation_enter:function(t){this.setState({classNames:["page-container",t]})},animation_leave:function(t){this.setState({classNames:["page-container",t]})},scroll_page_to_top:function(){var t=a(this.getDOMNode()).find(".page-body-container"),e=a(this.getDOMNode()).find(".sentinel"),i=t.scrollTop();0===i?location.reload(!0):(t.css({"overflow-y":"hidden"}),setTimeout(function(){t.css({"overflow-y":"auto"}),e.velocity("scroll",{duration:200,easing:"ease-in-out",container:t}).velocity({opacity:1})},0))}};e.exports=i},{jquery:"HlZQrA"}],13:[function(t,e){var a=t("react/addons"),i=a.addons.classSet,n=t("jquery"),s=a.createClass({displayName:"PagesContainer",getInitialState:function(){return{pages:[],current_page:void 0}},go:function(t){for(var e,a=this.state.pages,i=!1,s=n(this.getDOMNode()),o=0,r=a.length;r>o;++o)if(a[o].get_key()===t.get_key()){i=!0,e=a[o];break}s.removeClass("animate-before animate animate-after"),s.addClass("animate-before"),this.state.current_page&&this.state.current_page.animation_leave(t.props.data_leave),i?(this.setState({current_page:e}),e.animation_enter(t.props.data_enter)):(a.push(t),this.setState({pages:a,current_page:t}),t.animation_enter(t.props.data_enter)),setTimeout(function(){s.removeClass("animate-before").addClass("animate")},0)},render:function(){return a.DOM.div({className:i({"pages-container":!0})},a.DOM.div({className:"page"},this.state.pages.map(function(t){return a.DOM.div({key:t.get_key()},t)})))}});e.exports=s},{jquery:"HlZQrA","react/addons":"g51q1L"}],14:[function(t,e){var a=t("jquery"),i=(t("../post/PostItemPage"),t("../home/HomePage")),n=t("../historical/HistoricalPricesSettingsPage"),s=t("./App").get_instance(),o=t("./routes"),r=t("page"),c=t("./Db").get_instance(),l=function(){this.__attach_link_on_click();for(var t=0,e=o.length;e>t;++t){var a=o[t];r(a.route,this[a.handler].bind(this))}r(this.not_found),r.start({click:!1,popstate:!0,dispatch:!0})};l.prototype.reverse_animation_map={"slide-in-from-right":"slide-out-to-right","slide-out-to-right":"slide-in-from-right","slide-in-from-left":"slide-out-to-left","slide-out-to-left":"slide-in-from-left"},l.prototype.reverse_animation=function(t){if(this.reverse_animation_map[t])return this.reverse_animation_map[t];throw new Error("reverse_animation not allowed.")},l.prototype.home=function(t){this.current_ctx=t;var e=JSON.parse(JSON.stringify(t.state)),a=new i(e);s.go(a)},l.prototype.post_id=function(t){s.go(i,t.state)},l.prototype.historical_settings=function(t){this.current_ctx=t;var e=JSON.parse(JSON.stringify(t.state));e.historical_settings=c.get("historical_settings");var a=new n(e);s.go(a)},l.prototype.not_found=function(){s.go(i,{})},l.prototype.__attach_link_on_click=function(){var t=this;a(document).on("click","a",function(e){var i=a(e.currentTarget),n=!1;if(!(n||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)){var s=i.attr("href"),o=i.attr("data-enter"),c=i.attr("data-leave"),l=i.attr("data-back"),u=i.attr("target"),d={data_enter:o,data_leave:c,click:!0};"_blank"===u||(e.preventDefault(),l?window.hipost.back():(t.current_ctx.state.data_enter=t.reverse_animation(c),t.current_ctx.state.data_leave=t.reverse_animation(o),t.current_ctx.save(),r.show(s,d)))}})},e.exports=l},{"../historical/HistoricalPricesSettingsPage":22,"../home/HomePage":24,"../post/PostItemPage":26,"./App":8,"./Db":9,"./routes":19,jquery:"HlZQrA",page:7}],15:[function(t,e){var a=t("react/addons"),i=(t("jquery"),{section_arrow:function(){return a.DOM.div({className:"section-arrow-container"},a.DOM.div({className:"section-arrow sprite sprite-arrow-right-grey"}))},section_loading:function(t){return a.DOM.div({className:"sprite-loading-container",style:{display:t?"none":void 0}},a.DOM.div({className:"sprite sprite-loading"}))}});e.exports=i},{jquery:"HlZQrA","react/addons":"g51q1L"}],16:[function(t,e){var a=function(){};a.get_instance=function(){return this.instance?this.instance:this.instance=new this},e.exports=a},{}],17:[function(t,e){e.exports={SECOND:1e3,MINUTE:6e4,FIFTEEN_MINUTES:9e5,HOUR:36e5,SIX_HOURS:216e5,DAY:864e5,WEEK:6048e5,THIRTY_DAYS:2592e6}},{}],18:[function(t){var e=t("./App"),a=t("react/addons"),i=t("jquery"),n=t("./Router"),s=t("fastclick"),o=t("./Db").get_instance();i(function(){var t=a.renderComponent(e.get_instance(),document.getElementById("app")),r=new n;s(document.body),t.React=a,t.$=i,t.router=r,t.db=o,window.app=t})},{"./App":8,"./Db":9,"./Router":14,fastclick:6,jquery:"HlZQrA","react/addons":"g51q1L"}],19:[function(t,e){var a=[{route:"/",handler:"home"},{route:"/post/:id",handler:"post_id"},{route:"/historical/settings",handler:"historical_settings"}];e.exports=a},{}],20:[function(t,e){var a=t("react/addons"),i=t("jquery"),n=t("underscore"),s=t("d3"),o=t("./HistoricalPricesSettingsMixin"),r=t("../common/SectionMixin"),c=t("../common/constants"),l=a.createClass({displayName:"HistoricalPricesComponent",mixins:[r,n.omit(o,"historical_settings_updated")],getInitialState:function(){return{trade_buckets:[],has_data:!1,period_low:null,period_high:null}},on_resize_handler:function(){this.render_graph()},componentDidMount:function(){window.addEventListener("resize",this.on_resize_handler)},componentWillUnmount:function(){window.removeEventListener("resize",this.on_resize_handler)},shouldComponentUpdate:function(t,e){return e!==this.state},historical_settings_updated:function(t){this.setState({historical_settings:t}),this.get_historical_trades(t)},componentDidUpdate:function(){this.render_graph()},get_historical_trades:function(t){var e=this,a=t.selected_exchange.id.getValue();if("1h"===t.selected_range.id.getValue())var s=new Date(+new Date-c.HOUR).toISOString(),o=c.MINUTE;else if("1d"===t.selected_range.id.getValue())var s=new Date(+new Date-c.DAY).toISOString(),o=c.HOUR;else if("7d"===t.selected_range.id.getValue())var s=new Date(+new Date-c.WEEK).toISOString(),o=c.SIX_HOURS;else if("30d"===t.selected_range.id.getValue())var s=new Date(+new Date-c.THIRTY_DAYS).toISOString(),o=c.DAY;e.setState({has_data:!1}),i.ajax({url:"/_/api/trade_buckets",dataType:"json",data:{exchange_id:a,start_at:s,duration:o},success:function(t){t.trade_buckets=n(t.trade_buckets).map(function(t){return t.start_at=new Date(t.start_at),t.end_at=new Date(t.start_at.getTime()+t.duration),t.open=+t.open,t}),e.setState({trade_buckets:t.trade_buckets,period_low:t.period_low,period_high:t.period_high,has_data:!0})},error:function(t,e,a){console.log(e,a.toString())}})},render_graph:function(){if(this.state.has_data){var t=i(this.getDOMNode()).find(".graph").empty()[0],e=this.state.trade_buckets,a=i(this.getDOMNode()).find(".section-body");if(e&&e.length){var n={top:10,right:50,bottom:25,left:20},o=a.width(),r=2*o/3,c=o-n.left-n.right,l=r-n.top-n.bottom,u=.8*c/e.length,d=e[0].start_at,h=e[e.length-1].end_at,p=n.left,_=n.left+c,f=0*(+this.state.period_high-+this.state.period_low),g=Math.floor(+this.state.period_low-f),m=Math.ceil(+this.state.period_high+f),v=n.top+l,y=n.top,b=s.time.scale().domain([d,h]).range([p,_]),M=s.scale.linear().range([v,y]).domain([g,m]),w=s.svg.axis().scale(b).ticks(2).orient("bottom"),D=s.svg.axis().scale(M).tickValues([g,m]).tickFormat(function(t){return t.toFixed(2)}).orient("right"),O=s.select(t).attr("width",o).attr("height",r).attr("transform","translate("+n.left+","+n.top+")"),N=(O.append("g").attr("class","x axis").attr("transform","translate(0,"+(n.top+l)+")").call(w),O.append("g").attr("class","y axis").call(D)),x=[];N.selectAll(".tick").each(function(t){t=s.select(this),x.push(t.node().getBBox().width)});var k=Math.max.apply(null,x);N.attr("transform","translate("+(o-k)+",0)"),O.selectAll("rect").data(e).enter().append("svg:rect").attr("x",function(t){return b(t.start_at)}).attr("y",function(t){return M(Math.max(+t.open,+t.close))}).attr("height",function(t){return M(Math.min(+t.open,+t.close))-M(Math.max(+t.open,+t.close))||1}).attr("width",function(){return 1*u}).attr("fill",function(t){return+t.open>+t.close?"red":"green"}),O.selectAll("line.stem").data(e).enter().append("svg:line").attr("class","stem").attr("x1",function(t){return b(t.start_at)+.5*(u-1)}).attr("x2",function(t){return b(t.start_at)+.5*(u-1)}).attr("y1",function(t){return M(+t.high)}).attr("y2",function(t){return M(+t.low)}).attr("stroke",function(t){return+t.open>+t.close?"red":"green"})}}},render:function(){return a.DOM.div({className:"section-container"},a.DOM.div({className:"section"},a.DOM.div({className:"section-header-container"},a.DOM.a({href:"/historical/settings","data-leave":"slide-out-to-left","data-enter":"slide-in-from-right"},a.DOM.div({className:"section-header-right"},a.DOM.span({className:"color-muted"},this.state.historical_settings.selected_exchange.display.getValue()," · ",this.state.historical_settings.selected_range.display.getValue(),this.section_arrow()))),a.DOM.div({className:"section-header"},"Past Trades")),a.DOM.div({className:"section-body-container",style:{display:this.state.has_data?void 0:"none"}},a.DOM.div({className:"section-body"},a.DOM.svg({className:"graph"}))),this.section_loading(this.state.has_data)))}});e.exports=l},{"../common/SectionMixin":15,"../common/constants":17,"./HistoricalPricesSettingsMixin":21,d3:"eXt6gd",jquery:"HlZQrA","react/addons":"g51q1L",underscore:"ZKusGn"}],21:[function(t,e){var a=t("../common/Db").get_instance(),i=t("cortexjs"),n={componentWillMount:function(){if(!a.get("historical_settings")){var t=new i({selected_exchange:{id:"78cd5a5d-a0d2-481c-8d27-2ae86c694aa1",display:"Bitstamp"},selected_range:{id:"1d",display:"1 day"},selected_type:{id:"candlestick"},allowable_exchanges:[{id:"7ef94e48-5f48-4e81-9cdf-693db6432450",display:"Coinbase"},{id:"78cd5a5d-a0d2-481c-8d27-2ae86c694aa1",display:"Bitstamp"}],allowable_ranges:[{id:"1h",display:"1 hour"},{id:"1d",display:"1 day"},{id:"7d",display:"1 week"},{id:"30d",display:"1 month"}]});a.set("historical_settings",t)}a.get("historical_settings").on("update",this.historical_settings_updated),this.historical_settings_updated(a.get("historical_settings"))},componentWillUnmount:function(){a.get("historical_settings").off("update",this.historical_settings_updated)},historical_settings_updated:function(t){this.setState({historical_settings:t})},update_exchange:function(t){a.get("historical_settings").selected_exchange.set(t)},update_range:function(t){a.get("historical_settings").selected_range.set(t)}};e.exports=n},{"../common/Db":9,cortexjs:1}],22:[function(t,e){var a=t("react/addons"),i=t("../common/NestedHeaderComponent"),n=(t("./HistoricalPricesComponent"),t("./HistoricalPricesSettingsMixin")),s=t("../common/PageMixin"),o=a.createClass({displayName:"HistoricalPricesSettingsPage",mixins:[s,n],getInitialState:function(){return{classNames:["page-container"],ns:"HistoricalPricesSettingsPage"}},get_key:function(){return"historical_settings"},render:function(){var t=this;return a.DOM.div({className:this.state.classNames.join(" ")},a.DOM.div({className:"page"},i({back_text:"Back",title:"Past Trades"}),a.DOM.div({className:"page-body-container"},a.DOM.div({className:"page-body"},a.DOM.div({className:"section-container"},a.DOM.div({className:"section"},a.DOM.div({className:"section-header-container"},a.DOM.div({className:"section-header"},"Exchange")),a.DOM.div({className:"section-body-container no-padding"},a.DOM.div({className:"section-body"},this.state.historical_settings.allowable_exchanges.map(function(e,i){var n={visibility:t.state.historical_settings.selected_exchange.id.getValue()===e.id.getValue()?void 0:"hidden"},s="section-body-row clickable";if(i===t.state.historical_settings.allowable_exchanges.getValue().length-1)var s="section-body-row clickable last";return a.DOM.div({className:s,key:i,onClick:t.update_exchange.bind(t,e.getValue())},a.DOM.div({className:"section-body-row-right",style:n},a.DOM.div({className:"section-body-row-right-icon-container"},a.DOM.div({className:"section-body-row-right-icon sprite sprite-check-blue"}))),a.DOM.div({className:"section-body-row-center"},e.display.getValue()))}))))),a.DOM.div({className:"section-container"},a.DOM.div({className:"section"},a.DOM.div({className:"section-header-container"},a.DOM.div({className:"section-header"},"Range")),a.DOM.div({className:"section-body-container no-padding"},a.DOM.div({className:"section-body"},this.state.historical_settings.allowable_ranges.map(function(e,i){var n={visibility:t.state.historical_settings.selected_range.id.getValue()===e.id.getValue()?void 0:"hidden"},s="section-body-row clickable";if(i===t.state.historical_settings.allowable_ranges.getValue().length-1)var s="section-body-row clickable last";return a.DOM.div({className:s,key:i,onClick:t.update_range.bind(t,e.getValue())},a.DOM.div({className:"section-body-row-right",style:n},a.DOM.div({className:"section-body-row-right-icon-container"},a.DOM.div({className:"section-body-row-right-icon sprite sprite-check-blue"}))),a.DOM.div({className:"section-body-row-center"},e.display.getValue()))
}))))),a.DOM.div({className:"section-container"},a.DOM.div({className:"section"},a.DOM.div({className:"section-header-container"},a.DOM.div({className:"section-header"},"Type")),a.DOM.div({className:"section-body-container no-padding"},a.DOM.div({className:"section-body"},a.DOM.div({className:"section-body-row clickable last"},a.DOM.div({className:"section-body-row-right"},a.DOM.div({className:"section-body-row-right-icon-container"},a.DOM.div({className:"section-body-row-right-icon sprite sprite-check-blue"}))),a.DOM.div({className:"section-body-row-center"},"Candle"))))))))))}});e.exports=o},{"../common/NestedHeaderComponent":11,"../common/PageMixin":12,"./HistoricalPricesComponent":20,"./HistoricalPricesSettingsMixin":21,"react/addons":"g51q1L"}],23:[function(t,e){var a=t("react/addons"),i=t("../common/HeaderMixin"),n=a.createClass({displayName:"HomeHeaderComponent",mixins:[i],render:function(){return a.DOM.div({className:"page-header-container"},a.DOM.div({className:"page-header"},a.DOM.div({className:"page-header-right"},a.DOM.div({className:"page-header-icon-container",onClick:this.reload,onTouchEnd:this.reload},a.DOM.div({className:"page-header-icon sprite sprite-safari-refresh-white"}))),a.DOM.div({className:"page-header-center",onClick:this.props.scroll_body_to_top},a.DOM.div({className:"page-header-bloomforex-sprite sprite sprite-bloomforex-white"}))))}});e.exports=n},{"../common/HeaderMixin":10,"react/addons":"g51q1L"}],24:[function(t,e){var a=t("react/addons"),i=t("./HomeHeaderComponent"),n=t("../post/PostListSection"),s=t("../quote/QuoteHeroSection"),o=(t("../quote/QuoteListSection"),t("../historical/HistoricalPricesComponent")),r=t("../common/PageMixin"),c=a.createClass({displayName:"HomePage",mixins:[r],getInitialState:function(){return{classNames:["page-container"],ns:"HomePage"}},get_key:function(){return"home"},render:function(){return a.DOM.div({className:this.state.classNames.join(" ")},a.DOM.div({className:"page"},i({toggle_menu:this.props.toggle_menu,scroll_body_to_top:this.scroll_page_to_top}),a.DOM.div({className:"page-body-container"},a.DOM.div({className:"page-body"},a.DOM.div({className:"sentinel"}),s(null),o(null),n(null)))))}});e.exports=c},{"../common/PageMixin":12,"../historical/HistoricalPricesComponent":20,"../post/PostListSection":27,"../quote/QuoteHeroSection":29,"../quote/QuoteListSection":31,"./HomeHeaderComponent":23,"react/addons":"g51q1L"}],25:[function(t,e){var a=t("react/addons"),i=a.createClass({displayName:"PostItemComponent",render:function(){var t=this.props.post;if(t.image_thumb_url)var e=a.DOM.div({className:"post-item-left"},a.DOM.div({className:"post-item-image-container"},a.DOM.div({className:"post-item-image",style:{"background-image":"url("+t.image_thumb_url+")"}})));else var e="";return a.DOM.li(null,a.DOM.a({href:t.url,target:"_blank"},a.DOM.div({className:"post-item"},e,a.DOM.div({className:"post-item-text"},a.DOM.div({className:"post-item-title"},t.display),a.DOM.a({href:t.scheme+"://"+t.authority,target:"_blank"},a.DOM.span({className:"post-item-channel-name"},t.domain)),a.DOM.span({className:"post-item-date-ago"},"  ·  ",t.date_ago)))))}});e.exports=i},{"react/addons":"g51q1L"}],26:[function(t,e){var a=t("react/addons"),i=a.createClass({displayName:"PostItemPage",render:function(){return a.DOM.div({className:"page"},"lolol id=",this.props.post_id,a.DOM.a({href:"/"},"Home"))}});e.exports=i},{"react/addons":"g51q1L"}],27:[function(t,e){var a=t("react/addons"),i=t("./PostItemComponent"),n=t("jquery"),s=t("../common/SectionMixin"),o=a.createClass({displayName:"PostListSection",mixins:[s],getInitialState:function(){return{posts:[],has_data:!1}},componentWillMount:function(){n.ajax({url:"/_/api/posts",dataType:"json",success:function(t){this.setState({posts:t,has_data:!0})}.bind(this),error:function(t,e,a){console.log(e,a.toString())}.bind(this)})},render:function(){return a.DOM.div({className:"section-container"},a.DOM.div({className:"section"},a.DOM.div({className:"section-header-container"},a.DOM.div({className:"section-header"},"Top News",a.DOM.span({className:"tag tag-primary",style:{display:"none"}},"bitcoin"))),a.DOM.div({className:"section-body-container no-padding",style:{display:this.state.has_data?void 0:"none"}},a.DOM.div({className:"section-body"},a.DOM.ol(null,this.state.posts.map(function(t,e){return i({post:t,key:e})})))),this.section_loading(this.state.has_data)))}});e.exports=o},{"../common/SectionMixin":15,"./PostItemComponent":25,jquery:"HlZQrA","react/addons":"g51q1L"}],28:[function(t,e){var a=t("react/addons"),i=a.addons.classSet,n=t("./QuoteMixin"),s=a.createClass({displayName:"QuoteHeroComponent",mixins:[n],render:function(){var t=this,e=this.props.quote,n=this.get_formatted_price(e.last_trade.price),s=this.get_change(e.last_trade.price,e.day_old_trade.price),o=this.get_change_percentage(e.last_trade.price,e.day_old_trade.price),r=i({"section-body-row":!0,clickable:!0,last:this.props.is_last}),c=i(this.get_change_class(s),"quote-hero-change");return a.DOM.div({className:r},a.DOM.div({className:"quote-hero-price"},n),a.DOM.div({className:c},t.get_change_text(s)," (",t.get_change_text(o),"%)"),a.DOM.div({className:"quote-hero-provider"},"Realtime · ",e.exchange.provider," ",a.DOM.span({className:"uppercase"},"(",e.exchange.from_currency," / ",e.exchange.to_currency,")")),a.DOM.table({className:"quote-items-table"},a.DOM.tbody(null,a.DOM.tr(null,a.DOM.td({className:"quote-item-exchange"}),a.DOM.td({className:"quote-item-from-to"}),a.DOM.td({className:"quote-item-change"}),a.DOM.td({className:"quote-item-last-price"})))))}});e.exports=s},{"./QuoteMixin":32,"react/addons":"g51q1L"}],29:[function(t,e){var a=t("react/addons"),i=t("./QuoteHeroComponent"),n=(t("jquery"),t("../common/SectionMixin")),s=t("./QuotesMixin"),o=a.createClass({displayName:"QuoteListSection",mixins:[n,s],getInitialState:function(){return{quotes:[]}},render:function(){for(var t=[],e=0,n=this.state.quotes.val().length;n>e;++e)"bitstamp"===this.state.quotes.val()[e].exchange.provider&&t.push(this.state.quotes.val()[e]);return a.DOM.div({className:"section-container"},a.DOM.div({className:"section"},a.DOM.div({className:"section-header-container"},a.DOM.div({className:"section-header"},"Markets")),a.DOM.div({className:"section-body-container no-padding",style:{display:this.state.quotes.val().length?void 0:"none"}},a.DOM.div({className:"section-body"},t.map(function(e,a){return i({quote:e,key:a,is_last:a===t.length-1})}))),this.section_loading(this.state.quotes.val().length)))}});e.exports=o},{"../common/SectionMixin":15,"./QuoteHeroComponent":28,"./QuotesMixin":33,jquery:"HlZQrA","react/addons":"g51q1L"}],30:[function(t,e){var a=t("react/addons"),i=(a.addons.classSet,t("./QuoteMixin")),n=a.createClass({displayName:"QuoteItemComponent",mixins:[i],render:function(){var t=this,e=this.props.quote,i=this.get_formatted_price(e.last_trade.price.val()),n=this.get_change(e.last_trade.price.val(),e.day_old_trade.price.val());return a.DOM.table({className:"quote-items-table"},a.DOM.tbody(null,a.DOM.tr(null,a.DOM.td({className:"quote-item-exchange"},e.exchange.provider.val()),a.DOM.td({className:"quote-item-from-to"},e.exchange.from_currency.val(),"/",e.exchange.to_currency.val()),a.DOM.td({className:"quote-item-change"},a.DOM.span({className:t.get_change_class(n),style:t.get_change_style(n)},t.get_change_text(n))),a.DOM.td({className:"quote-item-last-price"},i))))}});e.exports=n},{"./QuoteMixin":32,"react/addons":"g51q1L"}],31:[function(t,e){var a=t("react/addons"),i=t("./QuoteItemComponent"),n=(t("jquery"),t("../common/SectionMixin")),s=t("./QuotesMixin"),o=a.createClass({displayName:"QuoteListSection",mixins:[n,s],getInitialState:function(){return{quotes:[]}},render:function(){var t=this;return a.DOM.div({className:"section-container"},a.DOM.div({className:"section"},a.DOM.div({className:"section-header-container"},a.DOM.div({className:"section-header"},"Markets")),a.DOM.div({className:"section-body-container no-padding",style:{display:this.state.quotes.val().length?void 0:"none"}},a.DOM.div({className:"section-body"},a.DOM.table({className:"quote-header-table",style:{display:"none"}},a.DOM.tbody(null,a.DOM.tr(null,a.DOM.td({className:"quote-header-exchange"},"Exchange"),a.DOM.td({className:"quote-header-quote"},"Quote")))),this.state.quotes.map(function(e,n){var s="section-body-row clickable";if(n===t.state.quotes.val().length-1)var s="section-body-row clickable last";return a.DOM.div({className:s},i({quote:e,key:n}))}))),this.section_loading(this.state.quotes.val().length)))}});e.exports=o},{"../common/SectionMixin":15,"./QuoteItemComponent":30,"./QuotesMixin":33,jquery:"HlZQrA","react/addons":"g51q1L"}],32:[function(t,e){var a=t("react/addons"),i=a.addons.classSet,n={get_formatted_price:function(t){return parseFloat(t,10).toFixed(2)},get_change:function(t,e){return t&&e?parseFloat(t,10)-parseFloat(e,10):null},get_change_percentage:function(t,e){if(t&&e){var a=parseFloat(t,10),i=parseFloat(e,10);return 100*(a-i)/i}return null},get_change_text:function(t){return null!==t?t>0?"+"+this.get_formatted_price(t):this.get_formatted_price(t):"N/A"},get_change_style:function(t){return{display:null===t?"none":void 0}},get_change_class:function(t){if(null!==t)var e=i({positive:t>0,negative:0>t});else var e=i();return e}};e.exports=n},{"react/addons":"g51q1L"}],33:[function(t,e){var a=t("../common/Db").get_instance(),i=t("cortexjs"),n=t("jquery"),s={componentWillMount:function(){var t=this;a.get("quotes")||a.set("quotes",new i([])),a.get("quotes").on("update",t.quotes_updated),t.quotes_updated(a.get("quotes")),n.ajax({url:"/_/api/quotes",dataType:"json",success:function(e){t.quotes_updated(new i(e.quotes))},error:function(t,e,a){console.log(e,a.toString())}})},componentWillUnmount:function(){a.get("quotes").off("update",this.quotes_updated)},quotes_updated:function(t){this.setState({quotes:t})},get_formatted_price:function(t){return parseFloat(t,10).toFixed(2)}};e.exports=s},{"../common/Db":9,cortexjs:1,jquery:"HlZQrA"}]},{},[18]);